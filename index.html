<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema de Biblioteca</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <h1>Sistema de Biblioteca</h1>
  <h2>Libros Disponibles</h2>
  <ul id="libros"></ul>
  <h2>Libros Prestados</h2>
  <ul id="prestados"></ul>
  <button id="prestar">Prestar Libro</button>
  <button id="devolver">Devolver Libro</button>

  <script>
    // Clase Libro
    class Libro {
      constructor(id, titulo, autor, genero, disponible = true) {
        this.id = id;
        this.titulo = titulo;
        this.autor = autor;
        this.genero = genero;
        this.disponible = disponible;
      }

      prestar() {
        if (this.disponible) {
          this.disponible = false;
          return `El libro "${this.titulo}" no esta disponible`;
        }
        return `El libro "${this.titulo}" ha sido prestado`;
      }

      devolver() {
        if (!this.disponible) {
          this.disponible = true;
          return `El libro "${this.titulo}" no estaba prestado. `;
        }
        return `El libro "${this.titulo}" ha sido devuelto.`;
      }
    }

    // Clase Biblioteca
    class Biblioteca {
      constructor() {
        this.libros = [];
        this.librosPrestados = [];
      }

      agregarLibro(libro) {
        this.libros.push(libro);
      }

      prestarLibro(id) {
        const libro = this.libros.find((l) => l.id === id && l.disponible);
        if (libro) {
          libro.disponible = false;
          this.librosPrestados.push(libro);
          return libro.prestar();
        }
        return `El libro con ID ${id} no está disponible.`;
      }

      devolverLibro(id) {
        const index = this.librosPrestados.findIndex((l) => l.id === id);
        if (index !== -1) {
          const libro = this.librosPrestados.splice(index, 1)[0];
          libro.disponible = true;
          return libro.devolver();
        }
        return `El libro con ID ${id} no estaba prestado.`;
      }
    }

    // Crear instancia de Biblioteca
    const biblioteca = new Biblioteca();

    // Crear libros
    const listaDeLibros = [
      { id: 1, titulo: "Cien Años de Soledad", autor: "Gabriel García Márquez", genero: "Novela" },
      { id: 2, titulo: "1984", autor: "George Orwell", genero: "Distopía" },
      { id: 3, titulo: "El Principito", autor: "Antoine de Saint-Exupéry", genero: "Ficción" },
      { id: 4, titulo: "El señor de los anillos", autor: "J. R. R. Tolkien", genero: "Ficción" },
      { id: 5, titulo: "Un mundo feliz", autor: "Aldoux Huxley", genero: "Drama" },
      { id: 6, titulo: "Orgullo y prejuicio", autor: "Jane Austen", genero: "Romántica" },
      { id: 7, titulo: "Crimen y castigo", autor: "Fiodor Dostojevski", genero: "Terror Psicológico" },
      { id: 8, titulo: "Lolita", autor: "Vladimir Nabokov", genero: "Novela" },
      { id: 9, titulo: "Ulises", autor: "James Joyce", genero: "Novela" },
      { id: 10, titulo: "Madame Bovary", autor: "Gustave Flaubert", genero: "Novela" },
      { id: 11, titulo: "Las mil y una noches", autor: "Anónimo", genero: "Novela" },
      { id: 12, titulo: "Don Quijote de la Mancha", autor: "Miguel de Cervantes", genero: "Novela" },
      { id: 13, titulo: "Almas muertas", autor: "Nikolai Gogol", genero: "Drama" },
      { id: 14, titulo: "Odisea", autor: "Homero", genero: "Clásico" },
      { id: 15, titulo: "Edipo Rey", autor: "Sófocles", genero: "Tragedia" }
    ];

    listaDeLibros.forEach(({ id, titulo, autor, genero }) => {
      const libro = new Libro(id, titulo, autor, genero);
      biblioteca.agregarLibro(libro);
    });

    // Interacción con el DOM
    const listaLibros = document.getElementById("libros");
    const listaPrestados = document.getElementById("prestados");

    function actualizarDOM() {
      listaLibros.innerHTML = "";
      biblioteca.libros.forEach((libro) => {
        const li = document.createElement("li");
        li.textContent = `${libro.id}. ${libro.titulo} - ${libro.disponible ? "Disponible" : "Prestado"}`;
        listaLibros.appendChild(li);
      });

      listaPrestados.innerHTML = "";
      biblioteca.librosPrestados.forEach((libro) => {
        const li = document.createElement("li");
        li.textContent = libro.titulo;
        listaPrestados.appendChild(li);
      });
    }

    const botonPrestar = document.getElementById("prestar");
    const botonDevolver = document.getElementById("devolver");

    botonPrestar.onclick = () => {
      const id = parseInt(prompt("Introduce el ID del libro a prestar:"));
      alert(biblioteca.prestarLibro(id));
      actualizarDOM();
    };

    botonDevolver.onclick = () => {
      const id = parseInt(prompt("Introduce el ID del libro a devolver:"));
      alert(biblioteca.devolverLibro(id));
      actualizarDOM();
    };

    actualizarDOM();
  </script>
</body>
</html>
